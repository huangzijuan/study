## 基本结构
![ccc7b011c0819cfe1176484d05365d0](/assets/ccc7b011c0819cfe1176484d05365d0.png)

在虚拟机执行代码的时候，会通过类装载子系统把class文件装到内存，虚拟机中的字节码执行引擎会到内存中找到这些信息，一行一行执行相关字节码，执行过程中会转换成本地系统认识的代码放到操作系统中，代码的转换过程是在本地库接口中完成的。

## 概念
程序计数器：用来记录程序运行位置的指示器
![240](/assets/240.png)
虚拟机栈：由栈帧组成，栈帧由局部变量表，操作数栈，帧数据区组成。
局部变量表：存放的是函数的入参，以及局部变量。
操作数栈：存放调用过程中的计算结果的临时存放区域。
帧数据区：存放的是异常处理表和函数的返回，访问常量池的指针。


## 内存分配
JVM中内存区可根据受访问权限的不同分为线程共享和线程私有两大类
1. 线程共享（包括堆区、方法区、运行时常量池）
2. 线程私有（栈区、）
每个线程都会有自己的线程栈（大约1M的空间），每个方法对应一个栈帧空间，每个线程有独立的程序计数器
![f4428de61c830dc9f47c5aa409d284b](/assets/f4428de61c830dc9f47c5aa409d284b.png)


## GCRoot
如果一个对象在栈区或是方法区中还直接或间接有强引用存在，那么它就是GC可达的，不能回收

![d8c5d3ebc59eea1e43171a882ff6c86](/assets/d8c5d3ebc59eea1e43171a882ff6c86.png)

如果能回收，在年轻代会采用复制算法
