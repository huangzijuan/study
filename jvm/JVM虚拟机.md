## 一、为什么要把堆分代分代
分代的唯一理由：为了优化GC性能
JVM中存储的JAVA对象可以被划分为两类：一类是生命周期较短的瞬时对象，这类对象的创建和消亡都非常迅速；另一类对象的生命周期非常长，在极端状况下还能够与JVM的生命周期保持一致。
所以对于不同生命周期的JAVA对象，应该采取不同的垃圾收集策略，分代收集因此诞生

## 二、JVM内存分区
#### 线程共有内存区
1. JAVA堆区
主要存放：对象实例
常见异常：OutOfMemoryError
JAVA字符串对象内存实现时，在堆中开辟了一小块内存，叫字符串常量池，用来存放特定的字符串对象
2. 方法区
主要存放：每一个JAVA类的结构信息（如：运行时常量池、字段和方法数据、构造方法和普通方法的字节码内容，以及类、实例、接口、初始化时需要用到的特殊方法等数据）
常见异常：OutOfMemoryError
3. 运行时常量池
属于方法区的一部分
运行时常量池是字节码文件中常量池表的运行时表现形式

#### 线程私有内存区
1. PC寄存器
主要用来存储正在执行的字节码指令地址
用于保存当前线程执行的内存地址。由于JVM程序是多线程执行的（线程轮流切换），所以为了保证线程切换回来后，还能恢复到原先状态，就需要一个独立的计数器，记录之前中断的地方
（JVM是基于栈的架构，任何的操作都需要通过出栈和入栈来完成）
2. Java栈（Java虚拟机栈）
为虚拟机执行java方法服务
java栈总是和线程关联在一起，每当创建一个线程时，JVM就会为这个线程创建一个对应的java栈。在这个java栈中又会包含多个栈帧，每运行一个方法就创建一个栈帧，用于存储局部变量表、操作栈、方法返回值等。每一个方法从调用直至执行完成的过程，就对应一个栈帧在java栈中入栈到出栈的过程。
主要存放：局部变量表、操作数栈、动态链接、方法出口
Java栈中的局部变量表用于存储：各类原始数据类型、对象引用（reference）以及returnAddress类型
常见异常：StackOverFlowError：请求的栈深度大于虚拟机允许的深度
OutOfMemoryError：无法申请到足够的内存
3. 本地方法栈
为虚拟机执行Native方法而服务
