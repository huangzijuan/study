## SP特点：
数据格式：XML格式保存
初始化：子线程使用IO读取整个文件，进行XML解析，存入内存Map集合
保存：commit同步提交，阻塞主线程；apply异步提交，无法获取结果且可能数据丢失
更新：把Map中的数据，全部序列化成XML，覆盖文件保存（全量更新）

## 传统I/O
虚拟内存被操作系统划分成两块：用户空间和内存空间。

## mmap
会将磁盘上的文件与虚拟内存区域进行关联，建立关联之后，用户操作这块内存区域，系统会自动回写到对应的磁盘文件中。

限制 只能是N页大小 （其中一页大小：4096字节）

## MMKV优势
MMAP对文件的读写操作只需要从磁盘到用户主存的一次数据拷贝，减少了数据的拷贝次数，提高了文件的操作效率
MMAP使用逻辑内存对磁盘文件进行映射，操作内存就相当于操作文件，不需要开启线程，操作MMAP的速度和操作内存速度一样快
MMAP提供了一段可供随时写入的内存块，APP只管往里面写数据，由操作系统负责将内存回写到文件（如内存不足、进程退出时）

更新方式：
增量写入（不管key是否重复，直接将数据追加在前数据后）
全量写入（）
  文件大小不够时
  map —— 计算按照MMKV方式保存需要的字节数
         即去重后文件大小是否够用：如果够用——map全量覆盖更新，记录到文件；如果不够用——对文件扩容
